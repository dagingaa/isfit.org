<h1>Attending participants</h1>
<p>Listing <b><%= @count %></b> attending participants.</p>
			
<table cellspacing="0" cellpadding="4" style="border: 2px solid #ccc; border-collapse: collapse" border="1">
	<tr>
		<td colspan="9">

<% form_tag({}, :method => :get) do %>
<table cellpadding="8" width="100%">
	<tr>
		<td>
			Workshop:
		</td>
		<td>
			<%= select_tag(:ws, options_for_select([['Show all', 0],1,3,4,5,6,7,8,9,10,11,
				12,13,14,15,16,17], params[:ws].to_i)) %>
		</td>
		<td>
			Visa status:
		</td>
		<td>
			<%= select_tag(:visa, options_for_select([['Show all', 0], ['Visa granted or not needed', 				1], ['Visa rejected or still being processed', 2]], params[:visa].to_i)) %>
		</td>
		<td>
			Per page:
		</td>
		<td>
			<%= select_tag(:per_page, options_for_select([15, 20, 25, 30, ['Unlimited', 0]], 
				@per_page))%>
		</td>
		<td align="right">
			<%= submit_tag('Update') %>
		</td>
	</tr>
</table>
<% end %>


		</td>
	</tr>
	<tr>
		<td align="center" width="40">
			<b><%= sort_header_tag('participants.id', :text => 'ID') %></b>
		</td>
		<td width="100">
			<b><%= sort_header_tag('participants.last_name',
				:text => 'Last name') %></b>
		</td>
		<td width="100">
			<b><%= sort_header_tag('participants.first_name',
				:text => 'First name') %></b>
		</td>
		<td width="100">
			<b><%= sort_header_tag('participants.email',
				:text => 'E-mail') %></b>
		</td>
		<td width="100">
			<b><%= sort_header_tag('countries.name',
				:text => 'Country') %></b>
		</td>
		<td align="right" width="40">
			<b><%= sort_header_tag('participants.final_workshop',
				:text => 'WS') %></b>
		</td>
		<td width="80">
			<b><%= sort_header_tag('participants.birthdate',
				:text => 'Date of B.') %></b>
		</td>
		<td width="40">
			<b><%= sort_header_tag('participants.sex',
				:text => 'Sex') %></b>
		</td>
		<td align="center" width=50">
			<b>Visa</b>
		</td>
	</tr>
<% 
	alternate = true
	@participants.each do |p| 
%>
	<tr<%= alternate ? ' class="alternate"' : '' %>>
		<td align="right"><%= link_to(p.id, :action => :show, :id => p.id) %></td>
		<td><%= p.last_name %></td>
		<td><%= p.first_name %></td>
		<td><%= p.email %></td>
		<td><%= p.country.name %></td>
		<td align="right"><%= p.final_workshop %></td>
		<td><%= p.birthdate.strftime("%d.%m.%Y") %></td>
		<td><%= p.sex %></td>
		<td align="center"><%= (p.answer.visa == 'NO_NEED_OF_VISA' or p.answer.visa == 
			'VISA_BEEN_GRANTED') ? 'Yes' : 'No' %></td>
	</tr>
<% 
	alternate = !alternate
	end 
%>
</table>

<% if @per_page != 0 %>
<p><%= will_paginate @participants %></p>
<% end %>
